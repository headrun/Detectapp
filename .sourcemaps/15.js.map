{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"15.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { HomePage } from './home';\n\n@NgModule({\n  declarations: [\n    HomePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(HomePage),\n  ],\n  exports: [\n    HomePage\n  ]\n})\nexport class HomePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component, Input} from '@angular/core';\nimport { NavController, AlertController, ToastController, LoadingController, Platform, TabHighlight, IonicPage} from 'ionic-angular';\nimport * as firebase from 'firebase';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\n@IonicPage({\n  name: 'HomePage'\n})\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage {\n\n  verificationId: any;\n  code: string = \"\";\n  isExist: boolean = false;\n  url:string;\n  timer:number = 60;\n\n  public recaptchaVerifier: firebase.auth.RecaptchaVerifier;\n  phoneNumber: any;\n  password: any;\n\n  splash = false;\n\n  constructor(public navCtrl: NavController, public alertCtrl: AlertController, public toastCtrl: ToastController,\n              public loadingCtrl: LoadingController, public platform: Platform) {\n      \n  }\n\n  ionViewDidLoad(){\n    // Recaptcha is initilaizing\n    this.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {\n      'size':'invisible',\n      'callback': function(response) {\n        console.log(response);\n      }\n    });\n  }\n\n  ionViewWillEnter() {\n\n    firebase.auth().onAuthStateChanged((user)=>{\n      if(user){\n        this.navCtrl.push(\"NewsPage\").then(() => {\n          const index = this.navCtrl.getActive().index;\n          this.navCtrl.remove(0, index);\n        });\n      }\n    });\n  }\n\n  loginUser(){\n    let navCtrl = this.navCtrl;\n    let isExist = this.isExist;\n    this.splash = true;\n\n    try{\n      (<any>window).AccountKitPlugin.loginWithPhoneNumber({\n        useAccessToken: true,\n        defaultCountryCode: \"IN\",\n        facebookNotificationsEnabled: true\n      }, (data) => {\n        (<any>window).AccountKitPlugin.getAccount((info) =>{\n          console.log(JSON.stringify(info));\n\n          window.localStorage.setItem('token',JSON.stringify(info));\n          window.localStorage.setItem('phoneNo',JSON.stringify(info.phoneNumber));\n          window.localStorage.setItem('accountId',JSON.stringify(info.accountId));\n          // var token = window.localStorage.getItem('token');\n          // alert(token);\n\n          firebase.auth().signInAnonymously().then(suc =>{\n\n            firebase.database().ref('userDetails').orderByChild('mobileNo').on('value', function(snapshot){\n              snapshot.forEach(function(childsnap){\n                console.log('mobNo----'+childsnap.val().mobileNo);\n                console.log('FirstName----'+childsnap.val().firstName);\n                console.log('fbKitPhn----'+info.phoneNumber);\n                console.log(childsnap.val().mobileNo == info.phoneNumber);\n                console.log(childsnap.val().firstName == '');\n  \n                if(childsnap.val().mobileNo === info.phoneNumber){\n\n                  setTimeout(() => {\n                    this.navCtrl.push(\"NewsPage\").then(() => {\n                      const index = this.navCtrl.getActive().index;\n                      this.navCtrl.remove(0, index);\n                    });\n                    this.splash = false;\n                  }, 4000);\n\n                    isExist = true;\n  \n                }\n                \n              });\n  \n              // console.log(isExist);\n  \n              if(!isExist){\n        \n                  navCtrl.push(\"ProfilePage\", {\n                  phoneNo: info.phoneNumber,\n                  userid: info.accountId\n                });\n                this.splash = false;\n              \n              }\n            });\n\n\n          }).catch(function(error) {\n            // Handle Errors here.\n            var errorCode = error.code;\n            var errorMessage = error.message;\n            console.log(errorMessage);\n            this.splash = false;\n            // ...\n          });\n\n        })\n      }, (err) =>{\n        console.log(JSON.stringify(err));\n        this.splash = false;\n      })\n\n    }catch(e){\n      console.log(e);\n      this.splash = false;\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}