{"version":3,"sources":["../../src/pages/show-going-users/show-going-users.module.ts","../../src/pages/show-going-users/show-going-users.ts"],"names":[],"mappings":"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","file":"12.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ShowGoingUsersPage } from './show-going-users';\n\n@NgModule({\n  declarations: [\n    ShowGoingUsersPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ShowGoingUsersPage),\n  ],\n  exports: [\n    ShowGoingUsersPage\n  ]\n})\nexport class ShowGoingUsersPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/show-going-users/show-going-users.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController } from 'ionic-angular';\nimport * as firebase from 'firebase';\n\n/**\n * Generated class for the ShowGoingUsersPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage({\n  'name': 'ShowGoingUsersPage'\n})\n@Component({\n  selector: 'page-show-going-users',\n  templateUrl: 'show-going-users.html',\n})\nexport class ShowGoingUsersPage {\n\n  data:Array<Object> = [];\n  header:string;\n  lctrl;\n  groupid:string;\n  postid: string;\n  userAuth = firebase.auth().currentUser;\n  constructor(public navCtrl: NavController, public navParams: NavParams, public loadCtrl: LoadingController) {\n    this.lctrl = this.loadCtrl.create({\n      content:'Please Wait...'\n    });\n    this.lctrl.present();\n    this.data = navParams.get('data');\n    this.header = navParams.get('header');\n    this.groupid = navParams.get('groupid');\n    this.postid = navParams.get('postid');\n  }\n\n  ionViewDidLoad() {\n\n  }\n\n  ionViewDidEnter() {\n    console.log(this.data);\n    if(this.data != undefined) {\n      setTimeout(()=>{\n        this.lctrl.dismiss();\n      }, 100);\n    }\n  }\n\n  actionBtn(typ, index) {\n    let userid = this.userAuth.uid;\n    let cmtkey = this.data[index]['cmtkey'];\n    let cmtData = this.data[index];\n    let groupid = this.groupid;\n    let postid = this.postid;\n    if(typ === 'like'){\n      let flag = this.overrideIfExist(groupid,userid, postid, index, cmtkey);\n      if(!flag){\n        if(this.userAuth) {\n          firebase.database().ref(groupid+'_replies').orderByKey().equalTo(cmtkey).on('child_added', (datasnapshot)=>{\n            let obj = datasnapshot.val();\n            let likes_count = obj.likes_count+1;\n            this.data[index]['likes_count'] += likes_count;\n            obj.like_users.push(userid);\n            obj['likes_count'] = likes_count;\n            this.data[index]['cmtlike'] = 1;\n            firebase.database().ref(groupid+'_replies').child(cmtkey).set(obj).then((res)=>{\n              console.log('successfully liked!!!');\n            }, (err)=>{\n              console.log('caught the theif...');\n            });\n          });\n        }\n      }\n    }else if(typ === 'abuse'){\n      firebase.database().ref(groupid+'_replies').orderByKey().equalTo(cmtkey).on('child_added', (datasnapshot)=>{\n        let cmtObj = datasnapshot.val();\n        if(!cmtObj.is_abuse) {\n          cmtObj.is_abuse = true;\n        }\n        this.data.splice(this.data.indexOf(cmtData), 1);\n        firebase.database().ref(groupid+'_replies').child(cmtkey).set(cmtObj).then((res)=>{\n          console.log('comment abused');\n        }, (err)=>{\n          console.log('something went wrong!');\n        });\n      });\n    }\n  }\n\n  overrideIfExist(groupid, userid, postid, index, cmtkey) {\n    let gid = groupid;\n    let uid = userid;\n    let flag = false;\n    let cmtid = cmtkey;\n    firebase.database().ref(gid+'_replies').orderByKey().equalTo(cmtid).on('child_added', (datasnapshot) =>{\n      debugger;\n      let obj = datasnapshot.val();\n      let likes_data = obj.like_users\n      if(likes_data != undefined && likes_data.length != 0) {\n        for(let id of likes_data) {\n          if(id === uid){\n            likes_data.splice(likes_data.indexOf(id), 1);\n            obj['like_users'] = likes_data;\n            let likes_count = datasnapshot.val().likes_count;\n            likes_count -= 1;\n            this.data[index]['likes_count'] = likes_count;\n            obj['likes_count'] = likes_count;\n            this.data[index]['cmtlike'] = 0;\n            firebase.database().ref(groupid+'_replies').child(cmtid).set(obj).then((res)=>{\n              console.log('successfully updated!!!');\n            }, (err)=>{\n              console.log('caught the theif...');\n            });\n            flag = true;\n            return flag;\n          }\n        }\n      }\n    });\n    return flag;\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/show-going-users/show-going-users.ts"],"sourceRoot":""}